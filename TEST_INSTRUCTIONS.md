# Инструкция по тестированию исправлений

## Запуск приложения

```bash
cd C:\Users\l1roi\source\repos\Lab_4_TI
dotnet run --project Lab_4_TI\Lab_4_TI.csproj
```

Или нажмите F5 в Visual Studio.

## Тесты для проверки

### 1. Тест парсинга номера (вкладка "Сравнение")

**Ожидаемое поведение**: Должно работать с форматом `n=3,номер=11`

#### Тест 1.1: Простое сравнение
- Левый ввод: `n=3,номер=11`
- Правый ввод: `n=3,номер=11`
- Ожидаемый результат: "Функции ЭКВИВАЛЕНТНЫ!"

#### Тест 1.2: С разными номерами
- Левый ввод: `n=3,номер=5`
- Правый ввод: `n=3,номер=11`
- Ожидаемый результат: "Функции НЕ эквивалентны!" + контр-пример

### 2. Тест формулы (вкладка "По формуле")

**Ожидаемое поведение**: Формула `(x1 & !x2) | x3` должна корректно разбираться

#### Тест 2.1: Простая формула с отрицанием
- Формула: `(x1 & !x2) | x3`
- Ожидаемый результат: Таблица истинности + СДНФ + СКНФ
- Обратите внимание на строки "Лексемы:" и "ОПЗ:" в выводе

#### Тест 2.2: Формула с импликацией (пресет)
- Нажмите кнопку "Пример 2: (x1 | x2) -> x3"
- Ожидаемый результат: Корректная таблица истинности

### 3. Тест пресетов

#### 3.1 Вкладка "По номеру"
- Нажмите "Пример 1: n=3, номер=11"
- Ожидаемый результат: Автоматически заполняются поля и строится таблица

#### 3.2 Вкладка "По формуле"
- Нажмите "Пример 1: (x1 & !x2) | x3"
- Ожидаемый результат: Таблица истинности с отладочной информацией

#### 3.3 Вкладка "Сравнение"
- Нажмите "Пример 1: n=3,номер=11 vs n=3,номер=11"
- Ожидаемый результат: "Функции ЭКВИВАЛЕНТНЫ!"

## Известные проблемы и решения

### Проблема 1: "Некорректное выражение" для `(x1 & !x2) | x3`

**Причина**: Возможно, порядок операндов в Evaluator или проблема с парсингом унарного оператора `!`

**Отладка**: 
1. Запустите приложение
2. Введите `(x1 & !x2) | x3` во вкладке "По формуле"
3. Посмотрите на строки "Лексемы:" и "ОПЗ:" в результате
4. ОПЗ должна быть: `x1 x2 ! & x3 |`

**Если ОПЗ неправильная**:
- Проверьте приоритет операторов в `ParserRpn.PoluchitPrioritet()`
- `!` должен иметь приоритет 5 (самый высокий)

**Если ОПЗ правильная, но вычисление не работает**:
- Проблема в `Evaluator.Vichislit()`
- Проверьте порядок Pop для бинарных операторов (должно быть: правый = Pop, левый = Pop, результат = левый OP правый)

### Проблема 2: "Неверный формат номера функции" для `n=3,номер=11`

**Причина**: Парсинг строки с русскими словами

**Решение**: Исправлено в `CompareTabViewModel.RazobratVvod()`:
- Удаляем все варианты слова "номер": `номер=`, `nomer=`, `num=`
- Удаляем `n=`
- Остается `3,11` или `3, 11`
- Split по `,` и пробелам
- Получаем `["3", "11"]`

## Отладочная информация

В текущей версии добавлен отладочный вывод во вкладке "По формуле":
- **Лексемы**: Токены после лексического анализа
- **ОПЗ**: Обратная польская запись после парсинга

Это поможет понять, на каком этапе возникает ошибка.

## Пример правильного разбора

Для формулы `(x1 & !x2) | x3`:

1. **Лексемы**: `( x1 & ! x2 ) | x3`
2. **ОПЗ**: `x1 x2 ! & x3 |`
3. **Вычисление** (для x1=1, x2=0, x3=1):
   - Стек: []
   - x1: [1]
   - x2: [1, 0]
   - !: [1, 1] (отрицание 0 = 1)
   - &: [1] (1 AND 1 = 1)
   - x3: [1, 1]
   - |: [1] (1 OR 1 = 1)
   - Результат: 1 (true)

## Если ничего не помогает

Запустите приложение с отладчиком (F5 в Visual Studio) и поставьте точки останова в:
- `Evaluator.Vichislit()` - проверить вычисление
- `ParserRpn.VObramnuyuPolskuyuZapis()` - проверить парсинг
- `CompareTabViewModel.RazobratVvod()` - проверить парсинг номера
